{% extends 'base.html' %}
{% load static %}

{% block links %}
    <link rel="stylesheet" href="{% static 'edit.css' %}">
{% endblock %}

{% block content %}

    <h1>ÙˆÛŒØ±Ø§ÛŒØ´ Ø¯Ø³ØªÙˆØ± Ù¾Ø®Øª</h1>
    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</button>
    </form>
    <!-- Ø¯Ú©Ù…Ù‡ Ø­Ø°Ù -->
    <button type="button" onclick="openDeleteModal({{ object.id }})">ğŸ—‘ï¸ Ø­Ø°Ù</button>

    <!-- Modal (Ù…Ø®ÙÛŒ Ø¯Ø± Ø­Ø§Ù„Øª Ø¹Ø§Ø¯ÛŒ) -->
    <div id="delete-modal-{{ object.id }}" class="delete-modal hidden">
        <div class="modal-content">
            <p>Ù…Ø·Ù…Ø¦Ù†ÛŒ Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒ <strong>{{ object.title }}</strong> Ø±Ùˆ Ø­Ø°Ù Ú©Ù†ÛŒØŸ</p>
            <form method="POST" action="{% url 'delete' object.id %}">
                {% csrf_token %}
                <button type="submit">âœ… Ø¨Ù„Ù‡ØŒ Ø­Ø°Ù Ú©Ù†</button>
                <button type="button" onclick="closeDeleteModal({{ object.id }})">âŒ Ù†Ù‡</button>
            </form>
        </div>
    </div>


    <a href="{% url 'home' %}">Ø¨Ø§Ø²Ú¯Ø´Øª</a>

{% endblock %}
{% block js_src %}

    <script>
        function openDeleteModal(id) {
            const modal = document.getElementById(`delete-modal-${id}`);
            if (modal) {
                modal.classList.remove('hidden');
            } else {
                console.log("modal not found for id:", id);
            }
        }

        function closeDeleteModal(id) {
            const modal = document.getElementById(`delete-modal-${id}`);
            if (modal) {
                modal.classList.add('hidden');
            }
        }
    </script>
{% endblock %}